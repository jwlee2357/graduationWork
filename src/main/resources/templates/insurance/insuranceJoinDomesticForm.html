<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header">
    <title>Travée</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
<div class="container" style="max-width: 600px">
    <div class="py-5 text-center">
        <h2 th:text="#{domestic.travel.insurance.application}">국내 여행 보험 신청</h2>
    </div>
    <form th:action="@{/insurance/overseasSubmit}" method="post">
        <div class="mb-3">
            <label for="startDate" class="form-label" th:text="#{insurance.start.date}">보험 시작 날짜</label>
            <input type="text" class="form-control" id="startDate" name="startDate" required>
        </div>
        <div class="mb-3">
            <label for="endDate" class="form-label" th:text="#{insurance.end.date}">보험 종료 날짜</label>
            <input type="text" class="form-control" id="endDate" name="endDate" required>
        </div>
        <div class="mb-3">
            <label for="departureDate" class="form-label" th:text="#{departure.date}">출발 날짜</label>
            <input type="text" class="form-control" id="departureDate" name="departureDate" required>
        </div>
        <div class="d-grid gap-2">
            <button class="btn btn-primary btn-lg" type="submit" th:text="#{insurance.apply}">보험 신청</button>
        </div>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh.js"></script>
<script th:inline="javascript">
    // 서버에서 전달된 언어 코드
    const userLang = /*[[${#locale.language}]]*/ 'ko';

    // 언어에 따라 로케일 설정
    const localeMap = {
        "ko": "ko",
        "en": "default",
        "fr": "fr",
        "ja": "ja",
        "zh": "zh"
    };

    document.addEventListener('DOMContentLoaded', function() {
        // 사용자 언어에 따른 로케일 설정
        const localeSetting = localeMap[userLang] || "default";

        flatpickr("#startDate", {
            enableTime: true,
            position: "below",
            dateFormat: "Y-m-d",
            altInput: true,
            altFormat: "Y-m-d",
            locale: {
                ...flatpickr.l10ns[localeSetting], // 사용자 로케일 설정
                firstDayOfWeek: 1 // 한 주의 시작일을 월요일로 설정
            }
        });

        flatpickr("#endDate", {
            enableTime: true,
            position: "below",
            dateFormat: "Y-m-d",
            altInput: true,
            altFormat: "Y-m-d",
            locale: {
                ...flatpickr.l10ns[localeSetting], // 사용자 로케일 설정
                firstDayOfWeek: 1 // 한 주의 시작일을 월요일로 설정
            }
        });

        flatpickr("#departureDate", {
            enableTime: true,
            position: "below",
            dateFormat: "Y-m-d",
            altInput: true,
            altFormat: "Y-m-d",
            locale: {
                ...flatpickr.l10ns[localeSetting], // 사용자 로케일 설정
                firstDayOfWeek: 1 // 한 주의 시작일을 월요일로 설정
            }
        });
    });
</script>
</body>
<footer th:replace="fragments/footer :: footer"></footer>
</html>
